"use strict";function trackShare(t){if(window._mtr&&this.vF){var n=$(this.vF).parents(".googleplusshare").attr("data-track-action");window._mtr.track(n)}}!function(t,n,e){var i=function(i,o){var s={show:!1,hide:!1,scroll:!1,placement:"bottomright",type:"cornerbox",event:"click",anim:"fadeIn",name:""};this.options=t.extend(!0,s,o),this.$element=t(i),this.$window=t(e),this.vp="lg",this.isInTool=document.body.hasAttribute("data-istool"),this.prefersReducedMotion=!1,e.matchMedia&&e.matchMedia("(prefers-reduced-motion)").matches&&(this.prefersReducedMotion=!0),this.animationMirror={bounceInDown:"bounceOutUp",fadeIn:"fadeOut",fadeInDown:"fadeOutUp",fadeInUp:"fadeOutDown",slideInDown:"slideOutUp",slideInLeft:"slideOutLeft",slideInRight:"slideOutRight",zoomIn:"zoomOut",slideInUp:"slideOutDown"},this.isInTool||(n.touchevents&&(this.options.event=e.navigator.userAgent.match(/(iPad|iPhone|iPod)/g)?this.options.event+" touchstart":this.options.event+" tap"),this.setViewport(),this.init(),this.bindEvents())};i.prototype={isAnimating:!1,init:function(){this.handleOpen(),e._mtr&&t.each(this.$element.find("*[data-track-event]"),function(n,i){var o=t(i),s=o.attr("data-track-event"),a=o.attr("data-track-action");t(i).off(s).on(s,function(){e._mtr.track(a)})})},open:function(){var t=this;this.options.show?setTimeout(function(){t.options.scroll?t.openOnScroll():(t.$element.css({display:"block"}),t.options.openFn&&t.options.openFn(),t.whenDone("open",!0),t.close())},this.options.show):this.options.scroll?this.openOnScroll():(this.$element.css({display:"block"}),this.options.openFn&&this.options.openFn(),this.whenDone("open",!0),this.close())},close:function(n){var e=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:!1;if(n&&n.preventDefault(),!this.isAnimating){if(i)this.isAnimating=!0,this.prefersReducedMotion?this.$element.hide():this.$element.removeClass(this.options.anim).addClass(this.animationMirror[this.options.anim]).one("webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend",function(){t(this).hide(),this.isAnimating=!1}),this.options.closeFn&&this.options.closeFn(),this.whenDone("close");else if(this.options.hide){var o=setTimeout(function(){e.prefersReducedMotion?e.$element.hide():e.$element.removeClass(e.options.anim).addClass(e.animationMirror[e.options.anim]).one("webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend",function(){t(this).hide(),this.isAnimating=!1}),e.options.closeFn&&e.options.closeFn()},this.options.hide);this.$element.find("input, textarea").on("focus.mono",function(){clearTimeout(o)})}this.options.scroll&&this.$window.off("scroll."+this.options.name)}},handleOpen:function(){if(this.options.persistence||!e._monoEngagements.getLsEntry("shownengagement_"+this.options.engagementId)){if(this.options.viewports[this.vp])return void this.open();this.close(null,!0)}},bindEvents:function(){var t=this;this.$element.find(".closeBtn").on(this.options.event,function(n){t.close(n,!0)})},whenDone:function(t,n){e._mtr&&e._mtr.track("engagement_"+this.options.name+"_"+t),!this.options.persistence&&n&&e._monoLoader.utils.ls.set("shownengagement_"+this.options.engagementId,!0)},setViewport:function(){this.$window.width()<768?this.vp="mobile":this.$window.width()<1200?this.vp="tablet":this.vp="desktop"},openOnScroll:function(){var n=this,e=0;"bottomright"===this.$element.parent().attr("data-placement")?this.$element.parent().attr("right",this.$element.attr("width")):this.$element.css("position","fixed"),this.$window.scrollTop()>=t(document).height()-this.$window.height()-10?(this.$element.show(),this.options.openFn&&this.options.openFn(),this.whenDone("open",!0),this.close()):this.$window.on("scroll."+this.options.name,function(){n.$window.scrollTop()>=t(document).height()-n.$window.height()-10&&n.$window.scrollTop()>e&&(n.$element.show(),n.options.openFn&&n.options.openFn(),n.whenDone("open",!0),n.close()),e=n.$window.scrollTop()})}},t.fn.monoengagement=function(n){return this.each(function(){t.data(this,"monoengagement")||t.data(this,"monoengagement",new i(this,n))})}}(jQuery,Modernizr,window);var _monoEngagements={$body:$("body"),$window:$(window),init:function(){if(this.getLsEntry("visits")){var t=parseInt(this.getLsEntry("visits"));_monoLoader.utils.ls.remove("visits"),_monoLoader.utils.ls.set("visits",t+1)}else _monoLoader.utils.ls.set("visits",1);if(this.getLsEntry("pageviews")){var n=$.extend(!0,{},JSON.parse(this.getLsEntry("pageviews"))),e=window.location.pathname;n.hasOwnProperty(e)||(n[e]=1),_monoLoader.utils.ls.remove("pageviews"),_monoLoader.utils.ls.set("pageviews",JSON.stringify(n))}else{var i={},o=window.location.pathname;i[o]=1,_monoLoader.utils.ls.set("pageviews",JSON.stringify(i))}this.getData()},getData:function(){var t=this,n={},e="";if(n.filter={},n.filter.date=Math.floor(Date.now()/1e3)-60*(new Date).getTimezoneOffset(),n.filter.uri=window.location.pathname+window.location.search,n.filter.ref=document.referrer,n.filter.locale=window._monoLoader.utils.getSiteLocale(),n.filter.pages=$("body").attr("id"),this.getLsEntry("visits")&&(n.filter.visits=this.getLsEntry("visits")),this.getLsEntry("pageviews")){var i=JSON.parse(this.getLsEntry("pageviews")),o=0;$.each(i,function(t,n){o+=n}),n.filter.pageviews=o}e=$.param(n),$.ajax({type:"GET",url:"/api.php/engagements/invoker?"+e,data:{lang:window._monoLoader.utils.getSiteLocale()},success:function(n){if(n&&n.length>0){var e=n[0].filter(function(t){return 0!==t.type.indexOf("sticky")}),i=n[0].filter(function(t){return 0===t.type.indexOf("sticky")});e.length&&(t.queue=$({}),e.forEach(function(n){t.queue.queue("engagements",$.proxy(t.appendData,t,n))}),t.queue.dequeue("engagements")),i.length&&i.sort(function(t,n){return t.activeFrom-n.activeFrom}).forEach(function(n){t.appendStickyData(n)})}}})},appendData:function(t,n){var e=t.content,i=$(e),o=$('<a href="#" class="closeBtn" aria-label="close"></a>'),s=$.extend(!0,t.appearance,{});s.viewports=t.viewports,s.closeFn=n,o.insertBefore(i.find(".content")),i.addClass(s.anim),this.$body.append(i),s.openFn=function(){window._monoLoader.initLibs(),i.find(".h-captcha").length&&window._monoLoader.utils.waitFor(function(){return i.find(".h-captcha").length&&window.hcaptcha},function(){window.hcaptchaEngagementsInitialized||window._monoEngagements.initHcaptcha(i)},2e4,50),"undefined"==typeof window._monoForm?window._monoLoader.utils.waitFor(function(){return"undefined"!=typeof window._monoForm},function(){window._monoForm.bindLabelsClick(i.find(".form"))},5e3,800):window._monoForm.bindLabelsClick(i.find(".form")),i.hasClass("location")&&(i.find(".map").hasClass("gmap")?window._monoLoader.utils.waitFor(function(){return window._monoGmaps},function(){window._monoGmaps.init()},5e3,800):window._monoLoader.utils.waitFor(function(){return window._monoOsmaps},function(){window._monoOsmaps.init()},5e3,800))},s.name=t.name,s.persistence=t.persistence,s.engagementId=t.id,i.monoengagement(s)},appendStickyData:function(t){var n=this;window._monoLoader.windowLoaded?this.stickyDataCode(t):this.$window.on("load",function(){n.stickyDataCode(t)})},stickyDataCode:function(t){var n=$(t.content),e=n.find(".stickyTitle"),i=t.appearance.placement,o=$.extend(!0,t.appearance,{});o.viewports=t.viewports,this.$body.find('.stickyEngagementWrapper[data-placement="'+i+'"]').length||this.$body.append('<div class="stickyEngagementWrapper" data-placement="'+i+'"></div>');var s=this.$body.find('.stickyEngagementWrapper[data-placement="'+i+'"]');s.append(n),t.appearance.placement.indexOf("right")>-1&&e.insertBefore(n.find("i"));var a="";n.show();var r="",d=n.hasClass("hovereffect");if(d){n.removeClass("hovereffect"),e.css({width:"auto",display:"block"});var c=e.outerWidth();e.css({width:"",display:""});var h=["top","right","bottom","left"];h.forEach(function(t){r+=e.css("padding-"+t)+" "}),r=r.trim(),a+="#"+n.attr("id")+" .stickyTitle { padding: 0px; } #"+n.attr("id")+":hover .stickyTitle { width: "+c+"px; padding: "+r+";}",n.addClass("hovereffect")}if("stickycontactform"===t.type){var l=Modernizr.touchevents?"tap":"click";d&&r&&(a+="#"+n.attr("id")+".showForm .stickyTitle { padding: "+r+"; }"),n.on(l,"> a",function(t){t.preventDefault(),t.stopPropagation(),$(t.delegateTarget).toggleClass("showForm")}),$(document).on(l+".stickycontactclose",function(t){n.hasClass("showForm")&&!$(t.target).parents().is(n)&&n.removeClass("showForm")})}n.hide(),this.addStyleTag(a),o.openFn=function(){window._monoLoader.initLibs(),n.find(".h-captcha").length&&window._monoLoader.utils.waitFor(function(){return n.find(".h-captcha").length&&window.hcaptcha},function(){window.hcaptchaEngagementsInitialized||window._monoEngagements.initHcaptcha(n),"undefined"!=typeof window._monoForm&&window._monoForm.bindLabelsClick(n.find(".form"))},2e4,50)},o.name=t.name,o.persistence=!0,o.engagementId=t.id,n.monoengagement(o)},addStyleTag:function(t){if(t){var n=document.createElement("style");n.type="text/css",n.appendChild(document.createTextNode(t)),$("head").append(n)}},getLsEntry:function(t){var n=_monoLoader.utils.ls.get(t),e=_monoLoader.utils.cookie.get(t);return n?(e&&_monoLoader.utils.cookie.remove(t),n):e?(_monoLoader.utils.cookie.remove(t),_monoLoader.utils.ls.set(t,e),e):null},initHcaptcha:function(t){function n(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"normal";try{var e=hcaptcha.render(t[0],{sitekey:t.attr("data-sitekey"),size:n});t.parents(".form").attr("data-widgetid",e),window.hcaptchaEngagementsInitialized=!0}catch(i){console.error("Initialize error: ",i)}}var e=$(t).find(".h-captcha");if(!e.length)return!0;var i=e.parents("[data-animate]"),o=setInterval(function(){if($(t).width()&&(!i.length||i.is(".animationDone"))){clearInterval(o);var s=$(t).width()>304?"normal":"compact";$(t).find(".h-captcha").attr("data-invisible")&&$(t).find(".h-captcha").attr("data-invisible").length&&(s="invisible"),n(e,s)}},50)}};_monoEngagements.init();